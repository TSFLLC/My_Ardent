If(CountRows(colPillars) > 0, colPillars, tblPillars)

"Objectives for Pillar: " & Coalesce(varSelectedPillar.Pillar, "All")


Sort(
    Filter(
        tblObjectives,
        // show only the selected pillar's objectives (or all if none picked)
        IsBlank(varSelectedPillar.PillarID) || PillarID = varSelectedPillar.PillarID,
        // simple search
        IsBlank(txtSearchObj.Text) || StartsWith(Lower(Objective), Lower(txtSearchObj.Text))
    ),
    Objective,
    Ascending
)


If(ThisItem.IsSelected, RGBA(230,240,255,1), RGBA(255,255,255,1))


Set(varSelectedObjective, ThisItem);
Navigate(scrPriorities, ScreenTransition.Cover)


If(
    IsBlank(varSelectedObjective.ObjectID),
    Notify("Select an Objective first.", NotificationType.Warning),
    Navigate(scrDAPriorities, ScreenTransition.Cover)
)


scrObjectives
txtSearchObj
galObjectives





Sort(
    Filter(
        tblObjectives,
        IsBlank(varSelectedPillar.PillarID) || PillarID = varSelectedPillar.PillarID
    ),
    Objective,
    SortOrder.Ascending
)


If(
    IsBlank(varSelectedPillar.PillarID),
    Sort(colObjectives, Objective, SortOrder.Ascending),
    Sort(
        Filter(colObjectives, PillarID = varSelectedPillar.PillarID),
        Objective,
        SortOrder.Ascending
    )
)




New screen (Blank) â†’ rename scrPriorities.

Header label

Text:

"Dept: " & Coalesce(varSelectedDept.Department,"All")
& "  | Objective: " & Coalesce(varSelectedObjective.Objective,"")


Gallery (Vertical) â†’ rename galDeptPrio

Items (filters by Dept + Objective, uses collections to avoid delegation):

With(
    { _dept: Coalesce(varSelectedDept.DeptCode,""),
      _obj : varSelectedObjective.ObjectID },
    If(
        IsBlank(_dept) && IsBlank(_obj),
        // nothing selected â†’ show all
        Sort(colPrio, Priority, SortOrder.Ascending),
        IsBlank(_dept),
        // only objective chosen
        Sort(Filter(colPrio, ObjectID = _obj), Priority, SortOrder.Ascending),
        IsBlank(_obj),
        // only dept chosen
        Sort(Filter(colPrio, DeptCode = _dept), Priority, SortOrder.Ascending),
        // both chosen
        Sort(Filter(colPrio, DeptCode = _dept && ObjectID = _obj), Priority, SortOrder.Ascending)
    )
)


In Fields: Title â†’ Priority, Subtitle â†’ PriorityID.

When a priority is clicked

galDeptPrio.OnSelect:

Set(varSelectedPriority, ThisItem);
Navigate(scrKPIs, ScreenTransition.Cover)


Nav buttons

Back â†’ Back()

Home â†’ Navigate(scrHome, ScreenTransition.Fade)

ðŸŸ© Screen 4 â€” scrKPIs

Create the screen

New screen (Blank) â†’ rename scrKPIs.

Header label

"KPIs for Priority: " & Coalesce(varSelectedPriority.Priority, "")


Gallery (Vertical) â†’ rename galKPI

Items:

If(
    IsBlank(varSelectedPriority.PriorityID),
    FirstN(colKPIs, 0),        // nothing until a priority is chosen
    Sort(
        Filter(colKPIs, PriorityID = varSelectedPriority.PriorityID),
        KPIID,
        SortOrder.Ascending
    )
)


In Fields: Title â†’ KPI, Subtitle â†’ KPIID.

Optional: show details/edit

Insert Edit form (DataSource = tblKPIs, Item = galKPI.Selected, Mode = FormMode.View).

Add a Save button if you want to allow editing later:

SubmitForm(Form1)

ðŸŸ§ (Optional) Screen 5 â€” scrDAPriorities

Show enterprise (DA) priorities for the selected Objective (no KPI link yet):

Items:

If(
    IsBlank(varSelectedObjective.ObjectID),
    Sort(colDAPrio, DAPriorityID, SortOrder.Ascending),
    Sort(Filter(colDAPrio, ObjectID = varSelectedObjective.ObjectID),
        DAPriorityID, SortOrder.Ascending)
)

