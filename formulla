If(CountRows(colPillars) > 0, colPillars, tblPillars)

"Objectives for Pillar: " & Coalesce(varSelectedPillar.Pillar, "All")


Sort(
    Filter(
        tblObjectives,
        // show only the selected pillar's objectives (or all if none picked)
        IsBlank(varSelectedPillar.PillarID) || PillarID = varSelectedPillar.PillarID,
        // simple search
        IsBlank(txtSearchObj.Text) || StartsWith(Lower(Objective), Lower(txtSearchObj.Text))
    ),
    Objective,
    Ascending
)


If(ThisItem.IsSelected, RGBA(230,240,255,1), RGBA(255,255,255,1))


Set(varSelectedObjective, ThisItem);
Navigate(scrPriorities, ScreenTransition.Cover)


If(
    IsBlank(varSelectedObjective.ObjectID),
    Notify("Select an Objective first.", NotificationType.Warning),
    Navigate(scrDAPriorities, ScreenTransition.Cover)
)


scrObjectives
txtSearchObj
galObjectives


Navigate(scrHome, ScreenTransition.Fade)






Sort(
    Filter(
        tblObjectives,
        IsBlank(varSelectedPillar.PillarID) || PillarID = varSelectedPillar.PillarID
    ),
    Objective,
    SortOrder.Ascending
)


If(
    IsBlank(varSelectedPillar.PillarID),
    Sort(colObjectives, Objective, SortOrder.Ascending),
    Sort(
        Filter(colObjectives, PillarID = varSelectedPillar.PillarID),
        Objective,
        SortOrder.Ascending
    )
)




New screen (Blank) ‚Üí rename scrPriorities.

Header label

Text:

"Dept: " & Coalesce(varSelectedDept.Department,"All")
& "  | Objective: " & Coalesce(varSelectedObjective.Objective,"")


Gallery (Vertical) ‚Üí rename galDeptPrio

Items (filters by Dept + Objective, uses collections to avoid delegation):

With(
    { _dept: Coalesce(varSelectedDept.DeptCode,""),
      _obj : varSelectedObjective.ObjectID },
    If(
        IsBlank(_dept) && IsBlank(_obj),
        // nothing selected ‚Üí show all
        Sort(colPrio, Priority, SortOrder.Ascending),
        IsBlank(_dept),
        // only objective chosen
        Sort(Filter(colPrio, ObjectID = _obj), Priority, SortOrder.Ascending),
        IsBlank(_obj),
        // only dept chosen
        Sort(Filter(colPrio, DeptCode = _dept), Priority, SortOrder.Ascending),
        // both chosen
        Sort(Filter(colPrio, DeptCode = _dept && ObjectID = _obj), Priority, SortOrder.Ascending)
    )
)


In Fields: Title ‚Üí Priority, Subtitle ‚Üí PriorityID.

When a priority is clicked

galDeptPrio.OnSelect:

Set(varSelectedPriority, ThisItem);
Navigate(scrKPIs, ScreenTransition.Cover)


Nav buttons

Back ‚Üí Back()

Home ‚Üí Navigate(scrHome, ScreenTransition.Fade)

üü© Screen 4 ‚Äî scrKPIs

Create the screen

New screen (Blank) ‚Üí rename scrKPIs.

Header label

"KPIs for Priority: " & Coalesce(varSelectedPriority.Priority, "")


Gallery (Vertical) ‚Üí rename galKPI

Items:

If(
    IsBlank(varSelectedPriority.PriorityID),
    FirstN(colKPIs, 0),        // nothing until a priority is chosen
    Sort(
        Filter(colKPIs, PriorityID = varSelectedPriority.PriorityID),
        KPIID,
        SortOrder.Ascending
    )
)


In Fields: Title ‚Üí KPI, Subtitle ‚Üí KPIID.




Optional: show details/edit

Insert Edit form (DataSource = tblKPIs, Item = galKPI.Selected, Mode = FormMode.View).

Add a Save button if you want to allow editing later:

SubmitForm(Form1)

1) Create the screen

Insert ‚Üí New Screen ‚Üí Blank ‚Üí rename to scrDAPriorities.

2) Header label

Insert ‚Üí Label ‚Üí Text:

"DA Priorities for Objective: " & Coalesce(varSelectedObjective.Objective, "All")

3) Gallery (Vertical) ‚Üí rename galDA

Use the collection to avoid delegation warnings.

Items:

If(
    IsBlank(varSelectedObjective.ObjectID),
    // No objective selected ‚Üí show all DA priorities
    Sort(colDAPrio, DAPriorityID, SortOrder.Ascending),
    // Objective selected ‚Üí filter
    Sort(
        Filter(colDAPrio, ObjectID = varSelectedObjective.ObjectID),
        DAPriorityID,
        SortOrder.Ascending
    )
)


Fields (right pane ‚Üí Fields)

Title ‚Üí Priority

Subtitle ‚Üí DAPriorityID

Remove the image control if you don‚Äôt need it.

4) Optional: details pane (selected DA Priority)

Add a Label somewhere on the screen to show the selected item:

Coalesce(galDA.Selected.Priority, "Select a DA Priority")

5) Navigation from Objectives to DA (button on scrObjectives)

On your Objectives screen, add a button ‚ÄúView DA Priorities‚Äù and set OnSelect:

If(
    IsBlank(varSelectedObjective.ObjectID),
    Notify("Select an Objective first.", NotificationType.Warning),
    Navigate(scrDAPriorities, ScreenTransition.Cover)
)

6) (Future) When manager allows KPIs to link to DA

Right now your tblKPIs only links to department priorities via PriorityID.
When you later add a DAPriorityID column to tblKPIs, you can show KPIs for the selected DA Priority:

On scrDAPriorities, add a ‚ÄúView KPIs‚Äù button with:

Navigate(scrKPIs, ScreenTransition.Cover)


On scrKPIs, update the Items formula to support either lane:

With(
    {
        _deptPri: varSelectedPriority.PriorityID,
        _daPri:   galDA.Selected.DAPriorityID
    },
    If(
        !IsBlank(_deptPri),
        Sort(Filter(colKPIs, PriorityID = _deptPri), KPIID, SortOrder.Ascending),
        !IsBlank(_daPri),
        Sort(Filter(colKPIs, DAPriorityID = _daPri), KPIID, SortOrder.Ascending),
        FirstN(colKPIs, 0)   // nothing if neither is selected
    )
)


Set(varSelectedDept, ddlDept.Selected);
Set(varSelectedPillar, ddlPillar.Selected);
Navigate(scrObjectives, ScreenTransition.Cover)

Navigate(scrHome, ScreenTransition.Fade)

"Department: " & Coalesce(varSelectedDept.Department, "All") 
& "  |  Pillar: " & Coalesce(varSelectedPillar.Pillar, "All")


